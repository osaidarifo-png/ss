
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Samar ğŸ’š</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
  font-family: 'Segoe UI', sans-serif;
  text-align:center;
  color:white;
}

/* ğŸ‚ Cake */
.cake-container{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:10;
  filter: drop-shadow(0 0 20px #2ecc71);
}

.layer{
  margin:auto;
  background:#27ae60;
  border-radius:10px;
  position:relative;
}

.layer1{ width:220px; height:60px; }
.layer2{ width:170px; height:60px; margin-top:-10px;}
.layer3{ width:120px; height:60px; margin-top:-10px;}

.candle{
  width:10px;
  height:40px;
  background:white;
  position:absolute;
  top:-40px;
  left:50%;
  transform:translateX(-50%);
}

.flame{
  width:15px;
  height:15px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-15px;
  left:-2.5px;
  animation:flicker 0.2s infinite alternate;
}

@keyframes flicker{
  from{transform:scale(1);}
  to{transform:scale(1.2);}
}

/* ğŸ¤ Lily Flowers */
.lily{
  position:absolute;
  top:-60px;
  width:40px;
  height:40px;
  animation:fall linear infinite;
  pointer-events:none;
}

@keyframes fall{
  to{
    transform:translateY(110vh) rotate(360deg);
  }
}

.message{
  position:absolute;
  bottom:15%;
  width:100%;
  font-size:28px;
  opacity:0;
  transition:1.5s;
}
</style>
</head>

<body>

<audio id="bgMusic" autoplay loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=japanese-lofi-ambient-110624.mp3" type="audio/mp3">
</audio>

<div class="cake-container">
  <div class="layer layer3"></div>
  <div class="layer layer2"></div>
  <div class="layer layer1"></div>
  <div class="candle">
    <div class="flame" id="flame"></div>
  </div>
</div>

<div class="message" id="message">
  ğŸ¤ Happy Birthday Samar ğŸ’š <br>
  Pure as a lily, beautiful as your heart âœ¨
</div>

<script>

// ğŸ¤ Create Lily SVG
function createLily(){
  const lily = document.createElement("div");
  lily.classList.add("lily");
  lily.style.left = Math.random()*100 + "vw";
  lily.style.animationDuration = (6+Math.random()*4) + "s";

  lily.innerHTML = `
  <svg viewBox="0 0 100 100">
    <polygon points="50,5 65,40 95,50 65,60 50,95 35,60 5,50 35,40"
    fill="white" opacity="0.9"/>
    <circle cx="50" cy="50" r="8" fill="#f1c40f"/>
  </svg>`;

  document.body.appendChild(lily);
  setTimeout(()=>{lily.remove();},10000);
}

setInterval(createLily,400);

// âœ¨ Touch interaction (flowers move away)
document.addEventListener("mousemove", moveFlowers);
document.addEventListener("touchmove", moveFlowers);

function moveFlowers(e){
  let x = e.clientX || (e.touches && e.touches[0].clientX);
  let y = e.clientY || (e.touches && e.touches[0].clientY);

  document.querySelectorAll(".lily").forEach(lily=>{
    let rect = lily.getBoundingClientRect();
    let dx = rect.left - x;
    let dy = rect.top - y;
    let distance = Math.sqrt(dx*dx + dy*dy);
    if(distance < 100){
      lily.style.transform = `translate(${dx/5}px, ${dy/5}px)`;
    }
  });
}

// ğŸ¶ Activate music if blocked
document.addEventListener("click", ()=>{
  document.getElementById("bgMusic").play();
});

// ğŸ¤ Blow detection
navigator.mediaDevices.getUserMedia({ audio: true })
.then(stream=>{
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const mic = audioContext.createMediaStreamSource(stream);
  const analyser = audioContext.createAnalyser();
  mic.connect(analyser);
  const data = new Uint8Array(analyser.frequencyBinCount);

  function detectBlow(){
    analyser.getByteFrequencyData(data);
    let volume = data.reduce((a,b)=>a+b)/data.length;

    if(volume > 60){
      document.getElementById("flame").style.display="none";
      document.getElementById("message").style.opacity=1;
    }
    requestAnimationFrame(detectBlow);
  }
  detectBlow();
})
.catch(()=>alert("Please allow microphone access ğŸ¤"));

</script>

</body>
</html>
